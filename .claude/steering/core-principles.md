# Claude Code 共通原則

AI実行精度最大化のための全エージェント共通ルール。

## タスク管理

### TodoWriteでタスク分解
複数ステップを伴う作業では、TodoWriteでタスクを構造化し進捗を追跡すること。

理由：タスクを構造化し、進捗を追跡可能にするため

### TodoWrite更新ルール
**実行ルール**：
- 各タスクのステータス更新時: 実施内容の記録を必須化（空白不可）
- 進捗状況を常に明確にし、ユーザーに可視化する

### 実行前提条件
- **TodoWriteのタスク** → 複数ステップの作業では、in_progressステータスのタスクが存在すること

## 技術品質基準

### 禁止事項
- **any型使用** → 型チェックエラーの原因
  理由：型安全性を破壊し、実行時エラーを引き起こすため

## エラー対応原則

### 自動停止トリガー（必ず停止）
- **同じエラー3回発生**：根本原因分析必須
  理由：対症療法ではなく根本解決が必要なため
- **unknown型多用検出**：型ガード設計再検討
  理由：型安全性の設計に問題がある可能性が高いため

### エスカレーション基準（ユーザー確認必須）
- アーキテクチャ変更（新レイヤー追加、責務変更）
- 外部依存追加（npmパッケージ、外部API）
- 破壊的変更（既存APIの変更、データ構造の変更）
- 複数の実装方法があり優劣が判断できない場合

## 作業環境

### 一時ファイル作成ルール
作業中ファイルは`tmp/`ディレクトリ使用。完了時削除。
